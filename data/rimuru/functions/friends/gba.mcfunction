tag @s add rimuru_me
scoreboard players operation .rimuruf rimuru_id = @s rimuru_fa
execute as @a if score @s rimuru_id = .rimuruf rimuru_id run tag @s add rimuru_f
execute as @a if score @s rimuru_id = .rimuruf rimuru_id run scoreboard players set @s rimuru_fba 1
function rimuru:general/trigger_reset
tellraw @s [{"text":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"}]
execute if entity @s[nbt={cardinal_components:{"apoli:powers":{Powers:[{Type:"rimuru:commons_skills_lmck",Data:1}]}}}] as @a if score @s rimuru_id = .rimuruf rimuru_id unless entity @s[nbt={cardinal_components:{"apoli:powers":{Powers:[{Type:"rimuru:give_body_armor_activate"}]}}}] unless entity @a[tag=rimuru_f,nbt={Inventory:[{id:"minecraft:enchanted_book",tag:{body_armor:1b}}]}] run power grant @s rimuru:give_casting
execute if entity @s[nbt={cardinal_components:{"apoli:powers":{Powers:[{Type:"rimuru:commons_skills_lmck",Data:1}]}}}] as @a if score @s rimuru_id = .rimuruf rimuru_id unless entity @s[nbt={cardinal_components:{"apoli:powers":{Powers:[{Type:"rimuru:give_body_armor_activate"}]}}}] unless entity @a[tag=rimuru_f,nbt={Inventory:[{id:"minecraft:enchanted_book",tag:{body_armor:1b}}]}] run power grant @s rimuru:give_skill_consumation
execute if entity @s[nbt={cardinal_components:{"apoli:powers":{Powers:[{Type:"rimuru:commons_skills_lmck",Data:1}]}}}] as @a if score @s rimuru_id = .rimuruf rimuru_id unless entity @s[nbt={cardinal_components:{"apoli:powers":{Powers:[{Type:"rimuru:give_body_armor_activate"}]}}}] unless entity @a[tag=rimuru_f,nbt={Inventory:[{id:"minecraft:enchanted_book",tag:{body_armor:1b}}]}] run tellraw @s [{"selector":"@a[tag=rimuru_me]"},{"text":" Granted you a skill book of "},{"text":"Body Armor","bold":true,"color":"gold","hoverEvent":{"action":"show_text","value":"Reduce all physical damage that the user takes"}}]
execute if entity @s[nbt={cardinal_components:{"apoli:powers":{Powers:[{Type:"rimuru:commons_skills_lmck",Data:1}]}}}] unless entity @a[tag=rimuru_f,nbt={cardinal_components:{"apoli:powers":{Powers:[{Type:"rimuru:give_body_armor_activate"}]}}}] unless entity @a[tag=rimuru_f,nbt={Inventory:[{id:"minecraft:enchanted_book",tag:{body_armor:1b}}]}] run tellraw @s [{"text":"You have granted "},{"selector":"@a[tag=rimuru_f]"},{"text":" a skill book of "},{"text":"Body Armor","bold":true,"color":"gold","hoverEvent":{"action":"show_text","value":"Reduce all physical damage that the user takes"}}]
execute if entity @s[nbt={cardinal_components:{"apoli:powers":{Powers:[{Type:"rimuru:commons_skills_lmck",Data:0}]}}}] run tellraw @s [{"text":"You can't grant a skill you have yet to learn"}]
execute if entity @s[nbt={cardinal_components:{"apoli:powers":{Powers:[{Type:"rimuru:commons_skills_lmck",Data:1}]}}}] if entity @a[tag=rimuru_f,nbt={cardinal_components:{"apoli:powers":{Powers:[{Type:"rimuru:give_body_armor_activate"}]}}}] run tellraw @s [{"selector":"@a[tag=rimuru_f]"},{"text":" has already learned this skill"}]
execute if entity @s[nbt={cardinal_components:{"apoli:powers":{Powers:[{Type:"rimuru:commons_skills_lmck",Data:1}]}}}] unless entity @a[tag=rimuru_f,nbt={cardinal_components:{"apoli:powers":{Powers:[{Type:"rimuru:give_body_armor_activate"}]}}}] if entity @a[tag=rimuru_f,nbt={Inventory:[{id:"minecraft:enchanted_book",tag:{body_armor:1b}}]}] run tellraw @s [{"selector":"@a[tag=rimuru_f]"},{"text":" has already a skill book of "},{"text":"Body Armor","bold":true,"color":"gold","hoverEvent":{"action":"show_text","value":"Reduce all physical damage that the user takes"}},{"text":" on him"}]
execute if entity @s[nbt={cardinal_components:{"apoli:powers":{Powers:[{Type:"rimuru:commons_skills_lmck",Data:1}]}}}] as @a if score @s rimuru_id = .rimuruf rimuru_id unless entity @s[nbt={cardinal_components:{"apoli:powers":{Powers:[{Type:"rimuru:give_body_armor_activate"}]}}}] unless entity @a[tag=rimuru_f,nbt={Inventory:[{id:"minecraft:enchanted_book",tag:{body_armor:1b}}]}] run give @s minecraft:enchanted_book{body_armor:1b,display:{Lore: ['[{"text":"Skill Book"}]','[{"text":"Reduce all physical damage that the user take","color":"dark_gray"}]'],Name: '{"text":"Body Armor","color":"gold","italic":false,"bold":true}'}}
execute as @a if score @s rimuru_id = .rimuruf rimuru_id run tag @s remove rimuru_f
tag @s remove rimuru_me